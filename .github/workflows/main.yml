name: Docker Image CI

on: [push, pull_request]

jobs:

  build_mips:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: MIPS Little Endian x32
      run: docker build . --build-arg ARCH=mipsel-lts --build-arg HOST=mipsel-unknown-linux-gnu -t mipsel-unknown-linux-gnu:$(date +%s) --file Dockerfile

    - name: MIPS Big Endian x32
      if: success()
      run: docker build . --build-arg ARCH=mips --build-arg HOST=mipsel-unknown-linux-gnu -t mips-unknown-linux-gnu:$(date +%s) --file Dockerfile
